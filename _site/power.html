<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
	<title>权限申请</title>
	<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="plugins/font-awesome-4.5.0/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="plugins/ionicons-2.0.1/css/ionicons.min.css">
    <!-- DataTables -->
    <link rel="stylesheet" href="plugins/datatables/dataTables.bootstrap.css">
    <link rel="stylesheet" href="plugins/datatables/extensions/TableTools/css/dataTables.tableTools.css">
    <link rel="stylesheet" href="plugins/select2/select2.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="dist/css/AdminLTE.min.css">
    <!-- AdminLTE Skins. Choose a skin from the css/skins
         folder instead of downloading all of them to reduce the load. -->
    <link rel="stylesheet" href="dist/css/skins/all-skins.min.css">
    <style>
    	li {list-style-type:none;}
    </style>
</head>
	<body class="hold-transition register-page">
		<div style="float: left; position: absolute; margin-left: 50px">
        	<button type="button" class="btn btn-info" id="save">申请</button>
        </div>
		<h2 style="text-align: center;">权限申请</h2>
	    <div>
	        	
	            <div class="tab-pane" id="power">
					
			          <div>
			            <input type="hidden" id="user_name" value="">
			          </div>
		              <table id="example1" class="table table-bordered table-striped">	  
		                  <tr>
		                    <th><li>K3辅助系统</li>
								<ul><li><input type="checkbox" class="1-1" value="t_bom_auth" name="k3">BOM查询</li>
									<ul>
									<li><input type="checkbox" class="1-1-1" value="export_auth" name="t_bom_auth">导出</li>
									</ul>
								</ul>
								<ul><li><input type="checkbox" class="1-2" value="t_hj_auth" name="k3">货架查询</li>
									<ul>
										<li><input type="checkbox" class="1-2-1" value="export_auth" name="t_hj_auth">导出</li>
									</ul>
								</ul>
								<ul><li><input type="checkbox" class="1-3" value="t_icmo_auth" name="k3">投料单审批</li>
									<ul>
										<li><input type="checkbox" class="1-3-1" value="ic_auth" name="t_icmo_auth">管芯</li>
										<li><input type="checkbox" class="1-3-2" value="to_auth" name="t_icmo_auth">TO</li>
										<li><input type="checkbox" class="1-3-3" value="device_auth" name="t_icmo_auth">器件</li>
										<li><input type="checkbox" class="1-3-4" value="module_auth" name="t_icmo_auth">模块</li>
										<li><input type="checkbox" class="1-3-5" value="quality_auth" name="t_icmo_auth">品质</li>
										<li><input type="checkbox" class="1-3-6" value="export_auth" name="t_icmo_auth">导出</li>
									</ul>
								</ul>
								<ul><li><input type="checkbox" class="1-4" value="t_reject_auth" name="k3">报废单申请</li>
									<ul>
										<li><input type="checkbox" class="1-4-1" value="create_auth" name="t_reject_auth">新增</li>
										<li><input type="checkbox" class="1-4-2" value="delete_auth" name="t_reject_auth">删除</li>
										<li><input type="checkbox" class="1-4-3" value="dept_auth" name="t_reject_auth">部门manager</li>
										<li><input type="checkbox" class="1-4-4" value="fz_auth" name="t_reject_auth">分管副总</li>
										<li><input type="checkbox" class="1-4-5" value="cgy_auth" name="t_reject_auth">仓管员</li>
										<li><input type="checkbox" class="1-4-6" value="export_auth" name="t_reject_auth">导出</li>
									</ul>
								</ul>
								<ul><li><input type="checkbox" class="1-5" value="t_recieve_auth" name="k3">收货确认</li>
									<ul>
										<li><input type="checkbox" class="1-5-1" value="export" name="t_recieve_auth">导出</li>
										<li><input type="checkbox" class="1-5-2" value="update_wharehouse" name="t_recieve_auth">批量更新(仓库)</li>
										<li><input type="checkbox" class="1-5-3" value="update_sale" name="t_recieve_auth">批量更新(销售)</li>
									</ul>
								</ul>
								<ul><li><input type="checkbox" class="1-6" value="t_order_auth" name="k3">销售订单</li>
								</ul>
								<ul><li><input type="checkbox" class="1-7" value="t_return_auth" name="k3">回货计划</li>
								</ul>
								<ul><li><input type="checkbox" class="1-8" value="t_delivery_auth" name="k3">海思出库</li>
								</ul>
								<ul><li><input type="checkbox" class="1-9" value="t_change_auth" name="k3">任务变更单审批</li>
									<ul>
										<li><input type="checkbox" class="1-9-1" value="me_auth" name="t_change_auth">ME权限</li>
										<li><input type="checkbox" class="1-9-2" value="quality_auth" name="t_change_auth">品质权限</li>
									</ul>
								</ul>
		                    </th>
		                    <th><li>供应商管理</li></th>
		                    <th><li>生产现场管理</li></th>
		                    <th><li>宿舍管理</li>
		                    <ul>
		                    	<li><input type="checkbox" class="4-1" value="4-1" name="authority">人员管理</li>
		                    		<ul>
										<li><input type="checkbox" class="4-1-1" value="4-1-1">增</li>
										<li><input type="checkbox" class="4-1-1" value="4-1-2">删</li>
										<li><input type="checkbox" class="4-1-1" value="4-1-3">改</li>
										<li><input type="checkbox" class="4-1-1" value="4-1-4">查</li>
									</ul>
		                    	<li><input type="checkbox" class="4-2" value="4-2">房间管理</li>
		                    </ul>
		                    </th>
		                  </tr> 
		              </table>
	            </div>
            </div>
	</body>
	<script src="plugins/jQuery/jquery-1.11.0.min.js"></script>
    <!-- Bootstrap 3.3.5 -->
    <script src="bootstrap/js/bootstrap.min.js"></script>
	<script>
		// var ip = 'http://localhost:3000/'
		var ip = 'http://192.168.7.82:3001/'
		$(function(){
			var name =  getCookie("name")
			var token = getCookie("token")
			// $(".treeview i")
			// $(".treeview i").click(function(){
			// 	$(this).parent().parent().children('ul').children('li').slideToggle()
			// 	$(this).toggleClass("fa-minus")
			// })
			// $('.treeview-menu').children('li').slideToggle()
			$("#save").click(function(){
				var k3 = auth('k3')
				var recieve = auth('t_recieve_auth')
				var reject = auth('t_reject_auth')
				var icmo = auth('t_icmo_auth')
				var bom = auth('t_bom_auth')
				var hj = auth('t_hj_auth')
				var change = auth('t_change_auth')
				$.ajax({
					url: ip + "user/power2",
					type: 'post',
					data: {
						k3:k3,
		    			recieve:recieve,
		    			reject:reject,
		    			icmo:icmo,
		    			bom:bom,
		    			hj:hj,
		    			change: change,
						name: name,
						token: token,
					},
					success: function(rs){
						alert(rs)
					},
					error: function(rs){
						// error(rs)
						alert('申请失败')
					}
				})

			})
		})
		function auth(a){
			var b=""
			var check=$('input[name='+a+']:checked'); 
			check.each(function(){
			    b=b+" "+$(this).val();
			});
			console.log(b)
			return b
		}
		function getCookie(name)
		{
			var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");
			if(arr=document.cookie.match(reg))
			  return unescape(arr[2]);
			else
			  return null;
		}
		

	</script>
</html>